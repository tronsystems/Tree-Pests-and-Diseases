<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
		<link rel="stylesheet" href="css/fc.min.css" />
		<link rel="stylesheet" href="css/app.css" />

		<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.2.0.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/jquery.validate.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="js/app.js"></script>
		<script type="text/javascript" charset="utf-8">
			// Wait for Cordova to load
		    //
		    document.addEventListener("deviceready", onDeviceReady, false);
		    
		    // Cordova is ready
		    //
		    function onDeviceReady() {
		    	//set default values
		    	console.log("Device ready");
		    	setupLocalStorage();
				initForm();
				document.addEventListener("online", submitLocalReports, false);
				//Form validation...
				$("#form1").validate({
					errorPlacement: function(error, element) {
						if (element.attr("name") === "diseasecommonname" || element.attr("name") === "treespecies") {
							error.insertAfter($(element).parent());
						} else {
							error.insertAfter(element);
						}
				 	},
				 	submitHandler: function( form ) {
					 	data = $(form).serialize();
						storeReport(data);
						return false;
				    },
				    ignore: []
				});
	    		//Form submission...
	    		/*$('#form1').submit(
	    					function(){
	    						data = $(this).serialize();
	    						storeReport(data);
	    						return false;
	    					}
	    		);*/
	    		
		    }
    	</script>
	</head>
    <body>
    	<div data-role="header" class="logoh">
    		<a href="index.html" data-rel="back" data-icon="back" data-iconpos="notext" data-direction="reverse">Home</a>
			<h1>New Sighting</h1>
		</div><!-- /header -->
		<div id='content_container' data-role="content">
			<div id="counts"></div>
		    	Your personal details and the additional information are optional 
		    	but please complete as much as possible.
			<form id="form1" action="" method="POST">
    			<div>			
					<div data-role="fieldcontain">
						<label for="contactname">Your Name:</label>
						<input type="text" name="contactname" id="contactname" />
					</div>
				
					<div data-role="fieldcontain">	
						<label for="contactemail">Your Email:</label>
						<input type="email" name="contactemail" id="contactemail" />
					</div>
    			</div>

    			<div>
					<div data-role="fieldcontain" id="locnname" style="display:none;">
						<label for="locationname">Wood/ Location:</label>
						<input type="text" name="locationname" id="locationname" />
					</div>
				
					<div data-role="fieldcontain" id="locnpcode" style="display:none;">	
						<label for="locationpostcode">Postcode:</label>
						<input type="text" name="locationpostcode" id="locationpostcode" />	
					</div>
				
					<div data-role="fieldcontain" id="gpslatlng" style="display:none;"></div>
				
					<div data-role="fieldcontain">
						<label for="treespecies" class="select">Tree Species:</label>
						<select name="treespecies" id="treespecies" class="required">
							<option value="" data-placeholder="true">Select...</option>
					   		<option value="Ash">Ash</option>
					   		<option value="Oak">Oak</option>
					   		<option value="Other">Other</option>
						</select>
					</div>
				
					<div data-role="fieldcontain">	
						<label for="diseasecommonname" class="select">Disease:</label>
						<select name="diseasecommonname" id="diseasecommonname" class="required">
							<option value="" data-placeholder="true">Select...</option>
						   	<option value="Ash dieback">Ash dieback</option>
						   	<option value="Sudden oak death">Sudden oak death</option>
						   	<option value="Other">Other</option>
						</select>
					</div>
				
					<input type="hidden" name="datetimereported" id="datetimereported" />
					<input type="hidden" name="deviceid" id="deviceid" />
					<input type="hidden" name="locationgpslat" id="locationgpslat" />
					<input type="hidden" name="locationgpslng" id="locationgpslng" />
	    		</div>
				<div data-role="collapsible-set">
					<div data-role="collapsible">
    					<h3><a href="#">Additional Information</a></h3>
    					<div>			
							<div data-role="fieldcontain">
								<label for="locationdetails">Details of Location:</label>
								<input type="text" name="locationdetails" id="locationdetails" />
							</div>
							<div data-role="fieldcontain">	
								<label for="diseasesymptoms">Symptoms:</label>
								<input type="text" name="diseasesymptoms" id="diseasesymptoms" />
							</div>
							<div data-role="fieldcontain">	
								<label for="diseasesymptondistribution">Distribution of Symptoms on Tree:</label>
								<input type="text" name="diseasesymptondistribution" id="diseasesymptondistribution" />
							</div>
							<div data-role="fieldcontain">	
								<label for="diseasetreedistribution">Distribution of Suspect Trees:</label>
								<input type="text" name="diseasetreedistribution" id="diseasetreedistribution" />
							</div>
    					</div>
    				</div>
    			</div>				
				<div data-role="fieldcontain">
					<label for="sub"></label>
					<input name="sub" id="sub" type="submit" value="Submit" />
				</div>
				
				<div style="text-align:center">
					<a href="privacy.html">How we use this data</a>
				</div>
				
			</form> 
		</div>
    </body>
</html>